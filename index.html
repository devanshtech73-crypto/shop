<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store | Blazecloud</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --text: #111111;
            --gray: #f5f5f7;
            --border: #e1e1e1;
            --accent: #000000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        
        body { background: var(--bg); color: var(--text); padding-bottom: 50px; }

        /* HEADER */
        header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .brand { font-weight: 600; font-size: 1.1rem; letter-spacing: -0.5px; }
        
        .cart-link { font-size: 0.9rem; color: #666; text-decoration: none; }

        /* HERO */
        .hero {
            padding: 80px 20px;
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .hero h1 { font-size: 2.5rem; letter-spacing: -1px; margin-bottom: 10px; font-weight: 600; }
        .hero p { color: #666; font-size: 1rem; }

        /* GRID */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .product {
            transition: opacity 0.2s;
        }
        .product:hover { opacity: 0.8; }

        .img-box {
            background: var(--gray);
            height: 250px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .img-box img { width: 100%; height: 100%; object-fit: cover; }

        .details { display: flex; justify-content: space-between; align-items: flex-start; }
        
        .name { font-weight: 500; font-size: 1rem; margin-bottom: 4px; }
        .desc { font-size: 0.85rem; color: #666; }
        
        .price { font-weight: 500; font-size: 1rem; }

        /* BUTTON (Invisible Hitbox) */
        .product-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        /* Loading */
        .loading { text-align: center; color: #999; margin-top: 50px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <header>
        <div class="brand">Blazecloud.</div>
        <a href="#" class="cart-link">Bag (0)</a>
    </header>

    <div class="hero">
        <h1>Digital Essentials.</h1>
        <p>Premium Minecraft accounts delivered instantly to your inbox.</p>
    </div>

    <div id="loading" class="loading">Loading products...</div>

    <div class="grid" id="grid">
        </div>

    <script>
        async function load() {
            try {
                // Try fetching from Vercel backend
                let products;
                try {
                    const res = await fetch('/api/products');
                    products = await res.json();
                    if(!products.length) throw new Error();
                } catch {
                    // Fallback Data if API fails
                    products = [
                        { id: 1, name: "Minecraft Full Access", price: 450, desc: "Migrated / Mail Access", img: "https://placehold.co/400x400/f5f5f7/111?text=FA" },
                        { id: 2, name: "Name Change Account", price: 250, desc: "Custom Nickname", img: "https://placehold.co/400x400/f5f5f7/111?text=NFA" },
                        { id: 3, name: "Optifine Cape", price: 300, desc: "Cape Key", img: "https://placehold.co/400x400/f5f5f7/111?text=Cape" }
                    ];
                }

                document.getElementById('loading').style.display = 'none';
                const grid = document.getElementById('grid');

                products.forEach(p => {
                    // We pass data to checkout.html via URL parameters
                    const link = `checkout.html?product=${encodeURIComponent(p.name)}&price=${p.price}`;
                    
                    grid.innerHTML += `
                        <a href="${link}" class="product-link">
                            <div class="product">
                                <div class="img-box"><img src="${p.image || p.img}" alt=""></div>
                                <div class="details">
                                    <div>
                                        <div class="name">${p.name}</div>
                                        <div class="desc">${p.desc || p.description}</div>
                                    </div>
                                    <div class="price">â‚¹${p.price}</div>
                                </div>
                            </div>
                        </a>
                    `;
                });

            } catch (e) {
                console.log(e);
            }
        }
        load();
    </script>
</body>
</html>
